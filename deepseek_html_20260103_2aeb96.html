<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pediatric Nursing Flashcards - Chapter 21: Family-Centered Care</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', 'Arial', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            min-height: 100vh;
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            height: 96vh;
            background: #ffffff;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(2, 136, 209, 0.2);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            border: 3px solid #0288d1;
        }
        
        .header {
            background: linear-gradient(135deg, #0277bd, #0288d1);
            color: white;
            padding: 12px 15px;
            text-align: center;
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100" opacity="0.1"><path d="M50,20 Q70,30 80,50 Q70,70 50,80 Q30,70 20,50 Q30,30 50,20 Z" fill="white"/><path d="M35,35 Q50,20 65,35 Q80,50 65,65 Q50,80 35,65 Q20,50 35,35 Z" fill="white"/><circle cx="50" cy="50" r="12" fill="white"/></svg>');
            background-size: 80px 80px;
        }
        
        .header h1 {
            font-size: 1.5rem;
            margin-bottom: 4px;
            position: relative;
            color: #bbdefb;
            line-height: 1.2;
        }
        
        .header .subtitle {
            font-size: 0.9rem;
            opacity: 0.9;
            position: relative;
            color: #e3f2fd;
            margin-bottom: 8px;
        }
        
        .progress {
            background: #01579b;
            height: 6px;
            width: 100%;
            flex-shrink: 0;
            border-radius: 0 0 5px 5px;
        }
        
        .progress-bar {
            background: linear-gradient(90deg, #29b6f6, #0288d1);
            height: 100%;
            width: 0%;
            transition: width 0.4s ease;
            border-radius: 0 5px 5px 0;
        }
        
        .section-nav {
            display: flex;
            gap: 6px;
            padding: 8px 10px;
            background: linear-gradient(135deg, #01579b, #0277bd);
            border-bottom: 1px solid #29b6f6;
            flex-shrink: 0;
            overflow-x: auto;
            align-items: center;
            justify-content: center;
        }
        
        .section-btn {
            padding: 5px 10px;
            border: 2px solid #29b6f6;
            background: rgba(255, 255, 255, 0.95);
            color: #0277bd;
            border-radius: 15px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 0.75rem;
            white-space: nowrap;
            flex-shrink: 0;
            min-width: 120px;
            text-align: center;
        }
        
        .section-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(41, 182, 246, 0.4);
        }
        
        .section-btn.active {
            background: linear-gradient(135deg, #29b6f6, #0288d1);
            color: white;
            border-color: #0277bd;
            box-shadow: 0 6px 12px rgba(41, 182, 246, 0.5);
        }
        
        .flashcard {
            padding: 12px;
            flex: 1;
            display: flex;
            flex-direction: column;
            background: #ffffff;
            overflow: hidden;
            min-height: 0;
        }
        
        .question-container {
            display: flex;
            gap: 10px;
            align-items: flex-start;
            margin-bottom: 8px;
            background: white;
            padding: 12px;
            border-radius: 10px;
            border-left: 6px solid #29b6f6;
            box-shadow: 0 4px 8px rgba(2, 136, 209, 0.1);
            flex-shrink: 0;
        }
        
        .question-icon {
            background: linear-gradient(135deg, #0277bd, #29b6f6);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            font-weight: bold;
            flex-shrink: 0;
            box-shadow: 0 4px 8px rgba(2, 119, 189, 0.4);
        }
        
        .question {
            font-size: 0.9rem;
            line-height: 1.4;
            color: #01579b;
            flex-grow: 1;
            font-weight: 500;
            overflow-wrap: break-word;
            hyphens: auto;
        }
        
        .multiple-select-indicator {
            background: #d32f2f;
            color: white;
            padding: 3px 8px;
            border-radius: 15px;
            font-size: 0.7rem;
            font-weight: bold;
            margin-left: 6px;
            white-space: nowrap;
            box-shadow: 0 3px 6px rgba(211, 47, 47, 0.3);
            flex-shrink: 0;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 6px;
            margin-bottom: 8px;
            flex: 1;
            overflow: hidden;
            min-height: 0;
        }
        
        .option {
            padding: 8px 10px;
            border: 2px solid #bbdefb;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            display: flex;
            align-items: flex-start;
            gap: 10px;
            font-size: 0.85rem;
            line-height: 1.3;
            flex-shrink: 0;
            min-height: 45px;
        }
        
        .option:hover {
            background: #e3f2fd;
            border-color: #29b6f6;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(41, 182, 246, 0.2);
        }
        
        .option-letter {
            background: #bbdefb;
            color: #0277bd;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
            transition: all 0.3s ease;
            font-size: 0.8rem;
            border: 2px solid #90caf9;
        }
        
        /* CORRECT - ALWAYS GREEN */
        .option.correct {
            background: #c8e6c9;
            border-color: #388e3c;
            color: #1b5e20;
        }
        
        .option.correct .option-letter {
            background: #388e3c;
            color: white;
            border-color: #388e3c;
        }
        
        /* INCORRECT - ALWAYS RED */
        .option.incorrect {
            background: #ffcdd2;
            border-color: #d32f2f;
            color: #b71c1c;
        }
        
        .option.incorrect .option-letter {
            background: #d32f2f;
            color: white;
            border-color: #d32f2f;
        }
        
        .option.selected {
            background: #e3f2fd;
            border-color: #29b6f6;
            color: #0277bd;
        }
        
        .option.selected .option-letter {
            background: #29b6f6;
            color: #01579b;
            border-color: #0288d1;
        }
        
        .feedback {
            padding: 8px 10px;
            border-radius: 8px;
            margin-bottom: 8px;
            display: none;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            font-size: 0.85rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            flex-shrink: 0;
        }
        
        .feedback.correct {
            background: #c8e6c9;
            border: 3px solid #388e3c;
            color: #1b5e20;
            display: flex;
        }
        
        .feedback.incorrect {
            background: #ffcdd2;
            border: 3px solid #d32f2f;
            color: #b71c1c;
            display: flex;
        }
        
        .feedback-icon {
            font-size: 1.2rem;
            flex-shrink: 0;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 12px;
            background: #bbdefb;
            border-top: 2px solid #90caf9;
            flex-shrink: 0;
            gap: 8px;
        }
        
        .counter {
            font-weight: bold;
            color: #0277bd;
            font-size: 0.9rem;
            background: white;
            padding: 5px 10px;
            border-radius: 20px;
            border: 2px solid #29b6f6;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
            flex-shrink: 0;
        }
        
        .btn {
            padding: 8px 12px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.8rem;
            white-space: nowrap;
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #0277bd, #29b6f6);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(2, 119, 189, 0.4);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #0288d1, #0277bd);
            color: white;
        }
        
        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(2, 136, 209, 0.4);
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #ffb300, #ff8f00);
            color: #212529;
        }
        
        .btn-warning:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(255, 179, 0, 0.4);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #c62828, #b71c1c);
            color: white;
        }
        
        .btn-danger:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(198, 40, 40, 0.4);
        }
        
        .rationale {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            border: 3px solid #ffb300;
            border-radius: 10px;
            padding: 10px;
            margin-top: 8px;
            display: none;
            box-shadow: 0 4px 12px rgba(255, 179, 0, 0.2);
            flex-shrink: 0;
            overflow: hidden;
            max-height: 120px;
        }
        
        .rationale.show {
            display: block;
            animation: slideIn 0.5s ease;
        }
        
        .rationale h4 {
            color: #ff8f00;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9rem;
        }
        
        .rationale p {
            color: #856404;
            line-height: 1.4;
            font-size: 0.8rem;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .stats {
            display: flex;
            gap: 6px;
            justify-content: center;
            margin-top: 4px;
            flex-wrap: wrap;
            flex-shrink: 0;
        }
        
        .stat {
            background: rgba(255, 255, 255, 0.2);
            padding: 4px 8px;
            border-radius: 15px;
            font-size: 0.7rem;
            white-space: nowrap;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .cancel-selection {
            background: linear-gradient(135deg, #c62828, #b71c1c);
            color: white;
            margin: 0 auto 8px auto;
            display: none;
            box-shadow: 0 4px 10px rgba(198, 40, 40, 0.3);
            flex-shrink: 0;
        }
        
        .cancel-selection:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(198, 40, 40, 0.4);
        }
        
        .cancel-selection.show {
            display: flex;
        }
        
        .multiple-select-instructions {
            text-align: center;
            color: #c62828;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 0.8rem;
            background: #fff3cd;
            padding: 6px;
            border-radius: 8px;
            border: 2px solid #ffeaa7;
            flex-shrink: 0;
        }
        
        .matching-container {
            background: linear-gradient(135deg, #ffffff, #e3f2fd);
            border-radius: 8px;
            padding: 10px;
            border: 2px solid #bbdefb;
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            min-height: 0;
        }
        
        .matching-question {
            font-size: 0.85rem;
            color: #01579b;
            font-weight: 500;
            margin-bottom: 10px;
            padding: 8px;
            background: white;
            border-radius: 8px;
            border: 2px solid #bbdefb;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            max-height: 3em;
            flex-shrink: 0;
        }
        
        .matching-options {
            flex: 1;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 5px;
            overflow: hidden;
            padding: 2px;
            min-height: 0;
        }
        
        .matching-option {
            padding: 8px;
            border: 2px dashed #29b6f6;
            border-radius: 6px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            font-size: 0.8rem;
            font-weight: 500;
            color: #0288d1;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 40px;
            overflow: hidden;
            line-height: 1.2;
        }
        
        .matching-option:hover {
            background: #e3f2fd;
            border-style: solid;
            border-color: #0288d1;
        }
        
        .matching-option.correct {
            background: linear-gradient(135deg, #c8e6c9, #a5d6a7);
            border-color: #388e3c;
            border-style: solid;
            color: #1b5e20;
        }
        
        .matching-option.incorrect {
            background: linear-gradient(135deg, #ffcdd2, #ef9a9a);
            border-color: #d32f2f;
            border-style: solid;
            color: #b71c1c;
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1) !important;
        }
        
        /* Remove all scrollbars */
        .options,
        .matching-options,
        .rationale,
        .container,
        .flashcard,
        body {
            overflow: hidden !important;
            -ms-overflow-style: none !important;
            scrollbar-width: none !important;
        }
        
        .options::-webkit-scrollbar,
        .matching-options::-webkit-scrollbar,
        .rationale::-webkit-scrollbar {
            display: none !important;
            width: 0 !important;
            height: 0 !important;
        }
        
        @media (max-width: 768px) {
            .container {
                height: 98vh;
            }
            
            .section-btn {
                min-width: 100px;
                font-size: 0.7rem;
                padding: 4px 8px;
            }
            
            .matching-options {
                grid-template-columns: 1fr;
            }
            
            .header {
                padding: 10px 12px;
            }
            
            .header h1 {
                font-size: 1.2rem;
            }
            
            .navigation {
                padding: 8px 10px;
                flex-wrap: wrap;
                justify-content: center;
                gap: 6px;
            }
            
            .counter {
                order: -1;
                width: 100%;
                text-align: center;
                margin-bottom: 4px;
                font-size: 0.8rem;
            }
            
            .btn {
                padding: 6px 10px;
                font-size: 0.75rem;
            }
            
            .question {
                font-size: 0.85rem;
            }
            
            .option {
                font-size: 0.8rem;
                padding: 6px 8px;
                min-height: 40px;
            }
            
            .question-icon {
                width: 35px;
                height: 35px;
                font-size: 0.9rem;
            }
            
            .option-letter {
                width: 22px;
                height: 22px;
                font-size: 0.75rem;
            }
        }
        
        @media (max-height: 700px) {
            .container {
                height: 99vh;
            }
            
            .header {
                padding: 8px 10px;
            }
            
            .header h1 {
                font-size: 1.1rem;
            }
            
            .header .subtitle {
                font-size: 0.8rem;
            }
            
            .question-container {
                padding: 10px;
                margin-bottom: 6px;
            }
            
            .question {
                font-size: 0.8rem;
                line-height: 1.3;
            }
            
            .option {
                padding: 6px 8px;
                min-height: 35px;
                font-size: 0.75rem;
            }
            
            .navigation {
                padding: 6px 8px;
            }
            
            .rationale {
                max-height: 80px;
                padding: 8px;
            }
            
            .feedback {
                padding: 6px 8px;
                font-size: 0.75rem;
            }
            
            .option-letter {
                width: 20px;
                height: 20px;
                font-size: 0.7rem;
            }
            
            .stats {
                display: none;
            }
        }
        
        @media (max-height: 600px) {
            .question-container {
                padding: 8px;
            }
            
            .question-icon {
                width: 30px;
                height: 30px;
                font-size: 0.8rem;
            }
            
            .option {
                min-height: 30px;
                padding: 4px 6px;
                font-size: 0.7rem;
            }
            
            .option-letter {
                width: 18px;
                height: 18px;
                font-size: 0.65rem;
            }
            
            .btn {
                padding: 5px 8px;
                font-size: 0.7rem;
            }
            
            .rationale {
                max-height: 60px;
                padding: 6px;
            }
            
            .rationale p {
                font-size: 0.7rem;
                line-height: 1.3;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè• Chapter 21: Family-Centered Care During Illness & Hospitalization</h1>
            <div class="subtitle">Blue & Teal Medical Theme - Family Support & Pediatric Care</div>
            <div class="stats">
                <div class="stat">üìö 43 Questions</div>
                <div class="stat">üéØ Immediate Feedback</div>
                <div class="stat">‚úÖ Green/Red System</div>
                <div class="stat">üîÑ Multiple Question Types</div>
            </div>
        </div>
        <div class="progress">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        
        <div class="section-nav">
            <button class="section-btn active" onclick="setSection('multiple-choice')">Multiple Choice (31)</button>
            <button class="section-btn" onclick="setSection('multiple-response')">Multiple Response (12)</button>
            <button class="section-btn" onclick="setSection('all')">All Mixed (43)</button>
        </div>
        
        <div class="flashcard">
            <div class="question-container">
                <div class="question-icon" id="questionNumber">1</div>
                <div class="question" id="question"></div>
                <div class="multiple-select-indicator" id="multipleSelectIndicator" style="display: none;">Multiple Answers</div>
            </div>
            
            <div class="multiple-select-instructions" id="multipleSelectInstructions" style="display: none;">
                üí° Select ALL correct answers
            </div>
            
            <div class="options" id="options"></div>
            
            <div class="matching-container" id="matchingContainer" style="display: none;">
                <div class="matching-question" id="matchingQuestion"></div>
                <div class="matching-options" id="matchingOptions"></div>
            </div>
            
            <button class="btn cancel-selection" id="cancelBtn" onclick="cancelSelection()">
                üîÑ Reset
            </button>
            
            <div class="feedback" id="feedback">
                <div class="feedback-icon" id="feedbackIcon"></div>
                <div id="feedbackText"></div>
            </div>
            <div class="rationale" id="rationale">
                <h4>üí° Rationale:</h4>
                <p id="rationaleText"></p>
            </div>
        </div>
        
        <div class="navigation">
            <button class="btn btn-secondary" id="prevBtn" onclick="previousCard()">
                ‚¨ÖÔ∏è Prev
            </button>
            <div class="counter" id="counter">1/31</div>
            <button class="btn btn-warning" id="submitBtn" onclick="submitAnswer()" style="display: none;">
                ‚úÖ Submit
            </button>
            <button class="btn btn-primary" id="nextBtn" onclick="nextCard()">
                Next ‚û°Ô∏è
            </button>
        </div>
    </div>

    <script>
        // Chapter 21 Data - Family-Centered Care During Illness & Hospitalization
        const sections = {
            'multiple-choice': [
                {
                    question: "What behavior should most likely be manifested in an infant experiencing the protest phase of separation anxiety?",
                    options: [
                        "Inactivity",
                        "Depression and sadness",
                        "Inconsolable and crying",
                        "Regression to earlier behavior"
                    ],
                    correct: 2,
                    rationale: "For older infants, being inconsolable and crying is seen during the protest phase of separation anxiety."
                },
                {
                    question: "Because of their striving for independence and productivity, which age group of children is particularly vulnerable to events that may lessen their feeling of control and power?",
                    options: [
                        "Infants",
                        "Toddlers",
                        "Preschoolers",
                        "School-age children"
                    ],
                    correct: 3,
                    rationale: "School-age children are striving for independence and productivity and are now experiencing events that decrease their control and power."
                },
                {
                    question: "Cognitive development influences response to pain. What age group is most concerned with the fear of losing control during a painful experience?",
                    options: [
                        "Toddlers",
                        "Preschoolers",
                        "School-age children",
                        "Adolescents"
                    ],
                    correct: 3,
                    rationale: "Adolescents usually approach pain with self-control. They are concerned with remaining composed and feel embarrassed and ashamed of losing control."
                },
                {
                    question: "A child, age 4 years, tells the nurse that she needs a Band-Aid where she had an injection. What nursing action should the nurse implement?",
                    options: [
                        "Apply a Band-Aid.",
                        "Ask her why she wants a Band-Aid.",
                        "Explain why a Band-Aid is not needed.",
                        "Show her that the bleeding has already stopped."
                    ],
                    correct: 0,
                    rationale: "Children in this age group still fear that their insides may leak out at the injection site. The nurse should be prepared to apply a small Band-Aid after the injection."
                },
                {
                    question: "The psychosexual conflicts of preschool children make them extremely vulnerable to which threat?",
                    options: [
                        "Loss of control",
                        "Loss of identity",
                        "Separation anxiety",
                        "Bodily injury and pain"
                    ],
                    correct: 3,
                    rationale: "The psychosexual conflicts of children in this age group make them vulnerable to threats of bodily injury."
                },
                {
                    question: "A spinal tap must be done on a 9-year-old boy. While he is waiting in the treatment room, the nurse observes that he seems composed. When the nurse asks him if he wants his mother to stay with him, he says, 'I am fine.' How should the nurse interpret this situation?",
                    options: [
                        "This child is unusually brave.",
                        "He has learned that support does not help.",
                        "Nine-year-old boys do not usually want a parent present during the procedure.",
                        "Children in this age group often do not request support even though they need and want it."
                    ],
                    correct: 3,
                    rationale: "The school-age child's visible composure, calmness, and acceptance often mask an inner longing for support."
                },
                {
                    question: "The mother of a 7-month-old infant newly diagnosed with cystic fibrosis is rooming in with her infant. She is breastfeeding and provides all the care except for the medication administration. What should the nurse include in the plan of care?",
                    options: [
                        "Ensuring that the mother has time away from the infant",
                        "Making sure the mother is providing all of the infant's care",
                        "Determining whether other family members can provide the necessary care so the mother can rest",
                        "Contacting the social worker because of the mother's interference with the nursing care"
                    ],
                    correct: 0,
                    rationale: "The mother needs sufficient rest and nutrition so she can be effective as a caregiver. While the infant is hospitalized, the care is the responsibility of the nursing staff."
                },
                {
                    question: "A 10-year-old girl needs to have another intravenous (IV) line started. She keeps telling the nurse, 'Wait a minute,' and, 'I'm not ready.' How should the nurse interpret this behavior?",
                    options: [
                        "IV insertions are viewed as punishment.",
                        "This is expected behavior for a school-age child.",
                        "Protesting like this is usually not seen past the preschool years.",
                        "The child has successfully manipulated the nurse in the past."
                    ],
                    correct: 1,
                    rationale: "This school-age child is attempting to maintain some control over the hospital experience."
                },
                {
                    question: "The parents of a 4-month-old infant cannot visit except on weekends. What action by the nurse indicates an understanding of the emotional needs of a young infant?",
                    options: [
                        "Place her in a room away from other children.",
                        "Assign her to the same nurse as much as possible.",
                        "Tell the parents that frequent visiting is unnecessary.",
                        "Assign her to different nurses so she will have varied contacts."
                    ],
                    correct: 1,
                    rationale: "The infant is developing a sense of trust. This is accomplished by the consistent, loving care of a nurturing person."
                },
                {
                    question: "An 8-year-old girl is being admitted to the hospital from the emergency department with an injury from falling off her bicycle. What intervention will help her most in her adjustment to the hospital?",
                    options: [
                        "Explain hospital schedules to her, such as mealtimes.",
                        "Use terms such as 'honey' and 'dear' to show a caring attitude.",
                        "Explain when parents can visit and why siblings cannot come to see her.",
                        "Orient her parents, because she is too young, to her room and hospital facility."
                    ],
                    correct: 0,
                    rationale: "School-age children need to have control of their environment. The nurse should offer explanations or prepare the child for what to expect."
                },
                {
                    question: "A 13-year-old child with cystic fibrosis (CF) is a frequent patient on the pediatric unit. This admission, she is sleeping during the daytime and unable to sleep at night. What should be a beneficial strategy for this child?",
                    options: [
                        "Administer prescribed sedative at night to aid in sleep.",
                        "Negotiate a daily schedule that incorporates hospital routine, therapy, and free time.",
                        "Have the practitioner speak with the child about the need for rest when receiving therapy for CF.",
                        "Arrange a consult with the social worker to determine whether issues at home are interfering with her care."
                    ],
                    correct: 1,
                    rationale: "The lack of structure is allowing the child to sleep during the day, rather than at night. The nurse and child can plan a schedule that incorporates all necessary activities."
                },
                {
                    question: "Two hospitalized adolescents are playing pool in the activity room. Neither of them seems enthusiastic about the game. How should the nurse interpret this situation?",
                    options: [
                        "Playing pool requires too much concentration for this age group.",
                        "Pool is an activity better suited for younger children.",
                        "The adolescents may be enjoying themselves but have lower energy levels than healthy children.",
                        "The adolescents' lack of enthusiasm is one of the signs of depression."
                    ],
                    correct: 2,
                    rationale: "Children who are ill and hospitalized typically have lower energy levels than healthy children."
                },
                {
                    question: "A 6-year-old child is admitted to the pediatric unit and requires bed rest. Having art supplies available meets which purpose?",
                    options: [
                        "Allows the child to create gifts for parents",
                        "Provides developmentally appropriate activities",
                        "Is essential for play therapy so the child can work on past problems",
                        "Lets the child express thoughts and feelings through pictures rather than words"
                    ],
                    correct: 3,
                    rationale: "The art supplies allow the child to draw images that come into the mind. This can help the child develop symbols and then verbalize reactions to illness and hospitalization."
                },
                {
                    question: "The parents of a 3-year-old admitted for recurrent diarrhea are upset that the practitioner has not told them what is going on with their child. What is the priority intervention for this family?",
                    options: [
                        "Answer all of the parents' questions about the child's illness.",
                        "Immediately page the practitioner to come to the unit to speak with the family.",
                        "Help the family develop a written list of specific questions to ask the practitioner.",
                        "Inform the family of the time that hospital rounds are made so that they can be present."
                    ],
                    correct: 2,
                    rationale: "The nurse should determine what information the family does want and then help develop a list of questions."
                },
                {
                    question: "The nurse is admitting a 7-year-old child to the pediatric unit for abdominal pain. To determine what the child understands about the reason for hospitalization, what should the nurse do?",
                    options: [
                        "Find out what the parents have told the child.",
                        "Review the note from the admitting practitioner.",
                        "Ask the child why he came to the hospital today.",
                        "Question the parents about why they brought the child to the hospital."
                    ],
                    correct: 2,
                    rationale: "School-age children are able to answer questions. The only way for the nurse to know about the child's understanding of the reason for hospitalization is to ask the child directly."
                },
                {
                    question: "The nurse is notified that a 9-year-old boy with nephrotic syndrome is being admitted. Only semiprivate rooms are available. What roommate should be best to select?",
                    options: [
                        "A 10-year-old girl with pneumonia",
                        "An 8-year-old boy with a fractured femur",
                        "A 10-year-old boy with a ruptured appendix",
                        "A 9-year-old girl with congenital heart disease"
                    ],
                    correct: 1,
                    rationale: "An 8-year-old boy with a fractured femur would be the best choice for a roommate. The child with nephrotic syndrome most likely will be on immunosuppressive agents and susceptible to infection."
                },
                {
                    question: "The nurse is doing a prehospitalization orientation for a girl, age 7 years, who is scheduled for cardiac surgery. As part of the preparation, the nurse explains that after the surgery, the child will be in the intensive care unit. How might the explanation by the nurse be viewed?",
                    options: [
                        "Unnecessary",
                        "The surgeon's responsibility",
                        "Too stressful for a young child",
                        "An appropriate part of the child's preparation"
                    ],
                    correct: 3,
                    rationale: "The explanation is a necessary part of preoperative preparation and will help reduce the anxiety associated with surgery."
                },
                {
                    question: "A 9-year-old boy has an unplanned admission to the intensive care unit (ICU) after abdominal surgery. The nursing staff has completed the admission process, and his condition is beginning to stabilize. When speaking with the parents, the nurse should expect what additional stressor to be evident?",
                    options: [
                        "Usual day/night routine",
                        "Calming influence of staff",
                        "Adequate privacy and support",
                        "Insufficient remembering of his condition and routine"
                    ],
                    correct: 3,
                    rationale: "ICUs, especially when the family is unprepared for the admission, are strange and unfamiliar. There are many pieces of unfamiliar equipment, and the sights and sounds are much different from those of a general hospital unit."
                },
                {
                    question: "A 6-year-old is being discharged home, which is 90 miles from the hospital, after an outpatient hernia repair. In addition to explicit discharge instructions, what should the nurse provide?",
                    options: [
                        "An ambulance for transport home",
                        "Verbal information about follow-up care",
                        "Prescribed pain medication before discharge",
                        "Driving instructions for a route with less traffic"
                    ],
                    correct: 2,
                    rationale: "The nurse should anticipate that the child will begin experiencing pain on the trip home. By providing a dose of oral analgesia, the nurse can ensure the child remains comfortable during the trip."
                },
                {
                    question: "The nurse is caring for a 10-year-old child during a long hospitalization. What intervention should the nurse include in the care plan to minimize loss of control and autonomy during the hospitalization?",
                    options: [
                        "Allow the child to skip morning self-care activities to watch a favorite television program.",
                        "Create a calendar with special events such as a visit from a friend to maintain a routine.",
                        "Allow the child to sleep later in the morning and go to bed later at night to promote control.",
                        "Create a restrictive environment so the child feels in control of sensory stimulation."
                    ],
                    correct: 1,
                    rationale: "One intervention to minimize loss of control is to create a calendar with planned special events such as a visit from a friend. Maintaining the child's daily routine is another intervention to minimize the sense of loss of control."
                },
                {
                    question: "The nurse is caring for a 3-year-old child during a long hospitalization. The parent is concerned about how to support the child's siblings during the hospitalization. What statement is appropriate for the nurse to make?",
                    options: [
                        "You should choose one parent to spend every night in the hospital while the other parent stays at home with the other children.",
                        "You could leave your hospitalized child for periods at night to be at home with the other children.",
                        "You should discourage the siblings from visiting because this could upset everyone in the family.",
                        "You could encourage a nightly phone call between the siblings as part of the bedtime routine."
                    ],
                    correct: 3,
                    rationale: "A supportive measure for siblings of a hospitalized child is to have a routine of a phone call at some point during the day or evening so the parent at the hospital can stay in touch."
                },
                {
                    question: "The nurse should expect a toddler to cope with the stress of a short period of separation from parents by displaying what?",
                    options: [
                        "Regression",
                        "Happiness",
                        "Detachment",
                        "Indifference"
                    ],
                    correct: 0,
                    rationale: "Children in the toddler stage demonstrate goal-directed behaviors when separated from parents for short periods. They may demonstrate displeasure on the parents' return or departure by having temper tantrums or regressing to more primitive levels of development."
                },
                {
                    question: "The nurse is providing support to parents adapting to the hospitalization of their child to the pediatric intensive care unit. The nurse notices that the parents keep asking the same questions. What should the nurse do?",
                    options: [
                        "Patiently continue to answer questions, trying different approaches.",
                        "Kindly refer them to someone else for answering their questions.",
                        "Recognize that some parents cannot understand explanations.",
                        "Suggest that they ask their questions when they are not upset."
                    ],
                    correct: 0,
                    rationale: "The nurse should do the therapeutic action and patiently continue to answer questions, trying different approaches."
                },
                {
                    question: "The nurse is instructing student nurses about the stress of hospitalization for children from middle infancy throughout the preschool years. What major stress should the nurse relate to the students?",
                    options: [
                        "Pain",
                        "Bodily injury",
                        "Loss of control",
                        "Separation anxiety"
                    ],
                    correct: 3,
                    rationale: "The major stress from middle infancy throughout the preschool years, especially for children ages 6 to 30 months, is separation anxiety."
                },
                {
                    question: "Parents of a hospitalized child often question the skill of staff. The nurse interprets this behavior by the parents as what?",
                    options: [
                        "Normal",
                        "Paranoid",
                        "Indifferent",
                        "Wanting attention"
                    ],
                    correct: 0,
                    rationale: "Recent research has identified common themes among parents whose children were hospitalized, including feeling an overall sense of helplessness, questioning the skills of staff."
                },
                {
                    question: "When a preschool-age child is hospitalized without adequate preparation, the nurse should recognize that the child may likely see hospitalization as what?",
                    options: [
                        "Punishment",
                        "Loss of parental love",
                        "Threat to the child's self-image",
                        "Loss of companionship with friends"
                    ],
                    correct: 0,
                    rationale: "The rationale for preparing children for the hospital experience and related procedures is based on the principle that a fear of the unknown exceeds fear of the known. Preschool-age children see hospitalization as a punishment."
                },
                {
                    question: "A parent needs to leave a hospitalized toddler for a short period of time. What action should the nurse suggest to the parent to ease the separation for the toddler?",
                    options: [
                        "Bring a new toy when returning.",
                        "Leave when the child is distracted.",
                        "Tell the child when they will return.",
                        "Leave a favorite article from home with the child."
                    ],
                    correct: 3,
                    rationale: "If the parents cannot stay with the child, they should leave favorite articles from home with the child, such as a blanket, toy, bottle, feeding utensil, or article of clothing."
                },
                {
                    question: "The nurse needs to assess a 15-month-old child who is sitting quietly on his father's lap. What initial action by the nurse would be most appropriate?",
                    options: [
                        "Ask the father to place the child on the exam table.",
                        "Undress the child while he is still sitting on his father's lap.",
                        "Talk softly to the child while taking him from his father.",
                        "Begin the assessment while the child is in his father's lap."
                    ],
                    correct: 3,
                    rationale: "For young children, particularly infants and toddlers, preserving parent-child contact is a good way of decreasing stress or the need for physical restraint during an assessment."
                },
                {
                    question: "What parents should have the most difficult time coping with their child's hospitalization?",
                    options: [
                        "Parents of a child hospitalized for juvenile arthritis",
                        "Parents of a child hospitalized with a recent diagnosis of bronchiolitis",
                        "Parents of a child hospitalized for sepsis resulting from an untreated injury",
                        "Parents of a child hospitalized for surgical correction of undescended testicles"
                    ],
                    correct: 2,
                    rationale: "Factors that affect parents' reactions to their child's illness include the seriousness of the threat to the child. The parents of a child hospitalized for sepsis resulting from an untreated injury would have more difficulty coping."
                },
                {
                    question: "What choice of words or phrases would be inappropriate to use with a child?",
                    options: [
                        "'Rolling bed' for stretcher",
                        "'Special medicine' for dye",
                        "'Make sleepy' for deaden",
                        "'Catheter' for intravenous"
                    ],
                    correct: 3,
                    rationale: "Children can grasp information only if it is presented on or close to their level of cognitive development. 'Catheter' is a medical term and would be confusing."
                },
                {
                    question: "The nurse is assessing a child's functional self-care level for feeding, bathing and hygiene, dressing, and grooming and toileting. The child requires assistance or supervision from another person and equipment or device. What code does the nurse assign for this child?",
                    options: [
                        "I",
                        "II",
                        "III",
                        "IV"
                    ],
                    correct: 2,
                    rationale: "A code of III indicates the child requires assistance from another person and equipment or device."
                }
            ],
            
            'multiple-response': [
                {
                    question: "What are signs and symptoms of the stage of despair in relation to separation anxiety in young children? (Select all that apply.)",
                    options: [
                        "Withdrawn from others",
                        "Uncommunicative",
                        "Clings to parents",
                        "Physically attacks strangers",
                        "Forms new but superficial relationships",
                        "Regresses to early behaviors"
                    ],
                    correct: [0, 1, 5],
                    rationale: "Manifestations of the stage of despair seen in children during a hospitalization may include withdrawing from others, being uncommunicative, and regressing to earlier behaviors."
                },
                {
                    question: "What influences a child's reaction to the stressors of hospitalization? (Select all that apply.)",
                    options: [
                        "Gender",
                        "Separation",
                        "Support systems",
                        "Developmental age",
                        "Previous experience with illness"
                    ],
                    correct: [1, 2, 3, 4],
                    rationale: "Major stressors of hospitalization include separation, loss of control, bodily injury, and pain. Children's reactions are influenced by developmental age, previous experience with illness, coping skills, and support systems."
                },
                {
                    question: "The parents tell a nurse 'our child is having some short-term negative outcomes since the hospitalization.' The nurse recognizes that what can negatively affect short-term negative outcomes? (Select all that apply.)",
                    options: [
                        "Parents' anxiety",
                        "Consistent nurses",
                        "Number of visitors",
                        "Length of hospitalization",
                        "Multiple invasive procedures"
                    ],
                    correct: [0, 3, 4],
                    rationale: "Adverse outcomes may be related to the length and number of admissions, multiple invasive procedures, and the parents' anxiety."
                },
                {
                    question: "What are signs and symptoms of the stage of detachment in relation to separation anxiety in young children? (Select all that apply.)",
                    options: [
                        "Appears happy",
                        "Lacks interest in the environment",
                        "Regresses to an earlier behavior",
                        "Forms new but superficial relationships",
                        "Interacts with strangers or familiar caregivers"
                    ],
                    correct: [0, 3, 4],
                    rationale: "Manifestations of the stage of detachment may include appearing happy, forming new but superficial relationships, and interacting with strangers or familiar caregivers."
                },
                {
                    question: "What factors influence the effects of a child's hospitalization on siblings? (Select all that apply.)",
                    options: [
                        "Older siblings",
                        "Experiencing minimal changes",
                        "Receiving little information about their ill brother or sister",
                        "Being cared for outside the home by care providers who are not relatives",
                        "Perceiving that their parents treat them differently compared with before their siblings hospitalization"
                    ],
                    correct: [2, 3, 4],
                    rationale: "Factors that increase the effects on siblings are being cared for outside the home by non-relatives, receiving little information, and perceiving differential treatment by parents."
                },
                {
                    question: "What factors can negatively affect parents' reactions to their child's illness? (Select all that apply.)",
                    options: [
                        "Additional stresses",
                        "Previous coping abilities",
                        "Lack of support systems",
                        "Seriousness of the threat to the child",
                        "Previous experience with hospitalization"
                    ],
                    correct: [0, 2, 3],
                    rationale: "The factors that can negatively affect parents' reactions are additional stresses, lack of support systems, and the seriousness of the threat to the child."
                },
                {
                    question: "The nurse is assessing a family's use of complementary medicine practices. What practices are classified as mind-body control therapies? (Select all that apply.)",
                    options: [
                        "Relaxation",
                        "Acupuncture",
                        "Prayer therapy",
                        "Guided imagery",
                        "Herbal medicine"
                    ],
                    correct: [0, 2, 3],
                    rationale: "Relaxation, prayer therapy, and guided imagery are classified as mind-body control therapies."
                },
                {
                    question: "The nurse is assessing a family's use of complementary medicine practices. What practices are classified as nutrition, diet, and lifestyle or behavioral health changes? (Select all that apply.)",
                    options: [
                        "Reflexology",
                        "Macrobiotics",
                        "Megavitamins",
                        "Health risk reduction",
                        "Chiropractic medicine"
                    ],
                    correct: [1, 2, 3],
                    rationale: "Macrobiotics, megavitamins, and health risk reduction are classified as nutrition, diet, and lifestyle or behavioral health changes."
                },
                {
                    question: "Parents tell the nurse that siblings of their hospitalized child are feeling left out. What suggestions should the nurse make to the parents to assist the siblings to adjust to the hospitalization of their brother or sister? (Select all that apply.)",
                    options: [
                        "Arrange for visits to the hospital.",
                        "Limit information given to the siblings.",
                        "Encourage phone calls to the hospitalized child.",
                        "Make or buy inexpensive toys or trinkets for the siblings.",
                        "Identify an extended family member to be their support system."
                    ],
                    correct: [0, 2, 3, 4],
                    rationale: "Strategies to support siblings during hospitalization include arranging for visits, encouraging phone calls, giving inexpensive gifts, and identifying a support person."
                },
                {
                    question: "What are core principles of patient- and family-centered care? (Select all that apply.)",
                    options: [
                        "Collaboration",
                        "Empowering families",
                        "Providing formal and informal support",
                        "Maintaining strict policy and procedure routines",
                        "Withholding information that is likely to cause anxiety"
                    ],
                    correct: [0, 1, 2],
                    rationale: "Core principles of patient- and family-centered care include collaboration, empowerment, and providing formal and informal support."
                },
                {
                    question: "The nurse relates to parents that there are some beneficial effects of hospitalization for their child. What are beneficial effects of hospitalization? (Select all that apply.)",
                    options: [
                        "Recovery from illness",
                        "Improve coping abilities",
                        "Opportunity to master stress",
                        "Provide a break from school",
                        "Provide new socialization experiences"
                    ],
                    correct: [0, 1, 2, 4],
                    rationale: "Benefits include recovery from illness, opportunity to master stress and feel competent in coping abilities, and new socialization experiences."
                },
                {
                    question: "What nursing interventions should the nurse plan for a hospitalized toddler to minimize fear of bodily injury? (Select all that apply.)",
                    options: [
                        "Perform procedures slowly.",
                        "Maintain parent-child contact.",
                        "Use progressively smaller dressings on surgical incisions.",
                        "Tell the child bleeding will stop after the needle is removed.",
                        "Remove a dressing as quickly as possible from surgical incisions."
                    ],
                    correct: [1, 2],
                    rationale: "To minimize fear of bodily injury, do the procedure as quickly as possible while maintaining parent-child contact. The use of bandages may be particularly helpful."
                }
            ],
            
            'all': []
        };

        // Combine all questions for the 'all' section
        sections['all'] = [
            ...sections['multiple-choice'].map(q => ({...q, section: 'multiple-choice'})),
            ...sections['multiple-response'].map(q => ({...q, section: 'multiple-response'}))
        ];

        let currentSection = 'multiple-choice';
        let currentQuestion = 0;
        let selectedOption = null;
        let selectedOptions = [];
        let isSubmitted = false;
        let answers = {
            'multiple-choice': Array(sections['multiple-choice'].length).fill(null),
            'multiple-response': Array(sections['multiple-response'].length).fill({selected: [], submitted: false}),
            'all': Array(sections['all'].length).fill(null)
        };

        function setSection(section) {
            currentSection = section;
            currentQuestion = 0;
            selectedOption = null;
            selectedOptions = [];
            isSubmitted = false;
            
            document.querySelectorAll('.section-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            loadQuestion();
        }

        function isMultipleResponseQuestion() {
            if (currentSection === 'all') {
                const questionData = getCurrentQuestionData();
                return questionData?.section === 'multiple-response' || Array.isArray(questionData?.correct);
            }
            return currentSection === 'multiple-response';
        }

        function getCurrentQuestionData() {
            if (currentSection === 'all') {
                return sections['all'][currentQuestion] || null;
            } else {
                return sections[currentSection][currentQuestion];
            }
        }

        function loadQuestion() {
            const questionData = getCurrentQuestionData();
            
            if (!questionData) return;
            
            const isMultipleResponse = isMultipleResponseQuestion();
            
            // Update UI elements visibility
            document.getElementById('matchingContainer').style.display = 'none';
            document.getElementById('options').style.display = 'flex';
            document.getElementById('multipleSelectIndicator').style.display = isMultipleResponse ? 'block' : 'none';
            document.getElementById('multipleSelectInstructions').style.display = isMultipleResponse ? 'block' : 'none';
            document.getElementById('cancelBtn').classList.remove('show');
            document.getElementById('submitBtn').style.display = isMultipleResponse ? 'flex' : 'none';
            document.getElementById('questionNumber').textContent = currentQuestion + 1;
            
            let totalQuestions = getTotalQuestions();
            
            const progress = ((currentQuestion + 1) / totalQuestions) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
            document.getElementById('counter').textContent = `${currentQuestion + 1}/${totalQuestions}`;
            
            document.getElementById('question').textContent = questionData.question;
            loadOptions(questionData);
            
            document.getElementById('feedback').style.display = 'none';
            document.getElementById('rationale').classList.remove('show');
            
            document.getElementById('prevBtn').disabled = currentQuestion === 0;
            const isLastQuestion = currentQuestion >= totalQuestions - 1;
            document.getElementById('nextBtn').textContent = isLastQuestion ? 'Finish ‚û°Ô∏è' : 'Next ‚û°Ô∏è';
            document.getElementById('nextBtn').disabled = true;
            
            // Load saved answer state
            const storedAnswer = answers[currentSection][currentQuestion];
            if (storedAnswer !== null && storedAnswer !== undefined) {
                if (isMultipleResponse) {
                    selectedOptions = storedAnswer.selected || [];
                    isSubmitted = storedAnswer.submitted || false;
                    
                    if (isSubmitted) {
                        showFeedbackForMultipleResponse(questionData);
                        document.getElementById('nextBtn').disabled = false;
                        document.getElementById('submitBtn').disabled = true;
                    } else {
                        highlightSelectedOptionsForMultipleResponse();
                        document.getElementById('submitBtn').disabled = selectedOptions.length === 0;
                        document.getElementById('nextBtn').disabled = false;
                        if (selectedOptions.length > 0) {
                            document.getElementById('cancelBtn').classList.add('show');
                        }
                    }
                } else {
                    // For multiple-choice
                    selectedOption = storedAnswer;
                    highlightSelectedOption(storedAnswer, questionData);
                    showFeedback(storedAnswer, questionData);
                    document.getElementById('nextBtn').disabled = false;
                    document.getElementById('cancelBtn').classList.add('show');
                }
            } else {
                selectedOption = null;
                selectedOptions = [];
                isSubmitted = false;
                if (isMultipleResponse) {
                    document.getElementById('submitBtn').disabled = true;
                }
            }
        }

        function loadOptions(questionData) {
            const optionsContainer = document.getElementById('options');
            optionsContainer.innerHTML = '';
            
            if (questionData.options && questionData.options.length > 0) {
                questionData.options.forEach((option, index) => {
                    const optionElement = document.createElement('div');
                    optionElement.className = 'option';
                    optionElement.innerHTML = `
                        <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                        <div class="option-text">${option}</div>
                    `;
                    optionElement.onclick = () => selectOption(index, questionData);
                    optionsContainer.appendChild(optionElement);
                });
            } else {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">A</div>
                    <div class="option-text">No options available for this question</div>
                `;
                optionsContainer.appendChild(optionElement);
            }
        }

        function selectOption(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            if (isMultipleResponseQuestion()) {
                handleMultipleResponseSelect(index, questionData);
            } else {
                handleSingleSelect(index, questionData);
            }
        }

        function handleSingleSelect(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            answers[currentSection][currentQuestion] = index;
            selectedOption = index;
            
            highlightSelectedOption(index, questionData);
            showFeedback(index, questionData);
            document.getElementById('nextBtn').disabled = false;
            document.getElementById('cancelBtn').classList.add('show');
        }

        function handleMultipleResponseSelect(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            if (isSubmitted) return;
            
            const optionIndex = selectedOptions.indexOf(index);
            if (optionIndex === -1) {
                selectedOptions.push(index);
            } else {
                selectedOptions.splice(optionIndex, 1);
            }
            
            const options = document.querySelectorAll('.option');
            options.forEach((option, i) => {
                option.classList.remove('selected', 'correct', 'incorrect');
                if (selectedOptions.includes(i)) {
                    option.classList.add('selected');
                }
            });
            
            if (!answers[currentSection][currentQuestion]) {
                answers[currentSection][currentQuestion] = {selected: [], submitted: false};
            }
            answers[currentSection][currentQuestion].selected = selectedOptions;
            answers[currentSection][currentQuestion].submitted = false;
            
            document.getElementById('submitBtn').disabled = selectedOptions.length === 0;
            document.getElementById('nextBtn').disabled = false;
            document.getElementById('cancelBtn').classList.toggle('show', selectedOptions.length > 0);
        }

        function highlightSelectedOption(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            const options = document.querySelectorAll('.option');
            
            options.forEach((option, i) => {
                option.classList.remove('selected', 'correct', 'incorrect');
                
                if (i === index) {
                    if (i === questionData.correct) {
                        option.classList.add('correct');
                    } else {
                        option.classList.add('incorrect');
                        if (questionData.correct !== undefined) {
                            options[questionData.correct].classList.add('correct');
                        }
                    }
                }
            });
        }

        function highlightSelectedOptionsForMultipleResponse() {
            const options = document.querySelectorAll('.option');
            
            options.forEach((option, i) => {
                option.classList.remove('selected', 'correct', 'incorrect');
                if (selectedOptions.includes(i)) {
                    option.classList.add('selected');
                }
            });
        }

        function submitAnswer() {
            if (selectedOptions.length === 0) return;
            
            isSubmitted = true;
            
            if (!answers[currentSection][currentQuestion]) {
                answers[currentSection][currentQuestion] = {selected: [], submitted: false};
            }
            answers[currentSection][currentQuestion].submitted = true;
            
            const questionData = getCurrentQuestionData();
            showFeedbackForMultipleResponse(questionData);
            document.getElementById('nextBtn').disabled = false;
            document.getElementById('submitBtn').disabled = true;
            document.getElementById('cancelBtn').classList.remove('show');
        }

        function showFeedback(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            const feedback = document.getElementById('feedback');
            const feedbackIcon = document.getElementById('feedbackIcon');
            const feedbackText = document.getElementById('feedbackText');
            const rationale = document.getElementById('rationale');
            const rationaleText = document.getElementById('rationaleText');
            
            if (index === questionData.correct) {
                feedback.className = 'feedback correct';
                feedbackIcon.textContent = '‚úÖ';
                feedbackText.textContent = 'Correct! Well done.';
            } else {
                feedback.className = 'feedback incorrect';
                feedbackIcon.textContent = '‚ùå';
                const correctLetter = String.fromCharCode(65 + questionData.correct);
                feedbackText.textContent = `Incorrect. Correct: ${correctLetter}`;
            }
            
            feedback.style.display = 'flex';
            rationaleText.textContent = questionData.rationale;
            rationale.classList.add('show');
        }

        function showFeedbackForMultipleResponse(questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            const feedback = document.getElementById('feedback');
            const feedbackIcon = document.getElementById('feedbackIcon');
            const feedbackText = document.getElementById('feedbackText');
            const rationale = document.getElementById('rationale');
            const rationaleText = document.getElementById('rationaleText');
            
            const allCorrectSelected = questionData.correct.every(c => selectedOptions.includes(c));
            const noIncorrectSelected = selectedOptions.every(s => questionData.correct.includes(s));
            
            const options = document.querySelectorAll('.option');
            options.forEach((option, i) => {
                option.classList.remove('selected', 'correct', 'incorrect');
                if (questionData.correct.includes(i)) {
                    option.classList.add('correct');
                }
                if (selectedOptions.includes(i) && !questionData.correct.includes(i)) {
                    option.classList.add('incorrect');
                }
            });
            
            if (allCorrectSelected && noIncorrectSelected) {
                feedback.className = 'feedback correct';
                feedbackIcon.textContent = '‚úÖ';
                feedbackText.textContent = 'Perfect! All correct selected.';
            } else if (allCorrectSelected && !noIncorrectSelected) {
                feedback.className = 'feedback incorrect';
                feedbackIcon.textContent = '‚ö†Ô∏è';
                feedbackText.textContent = 'Almost! All correct + some incorrect.';
            } else if (!allCorrectSelected && noIncorrectSelected) {
                feedback.className = 'feedback incorrect';
                feedbackIcon.textContent = '‚ö†Ô∏è';
                feedbackText.textContent = 'Partially correct! Some correct, missed others.';
            } else {
                feedback.className = 'feedback incorrect';
                feedbackIcon.textContent = '‚ùå';
                feedbackText.textContent = 'Incorrect. Missed correct & selected incorrect.';
            }
            
            feedback.style.display = 'flex';
            rationaleText.textContent = questionData.rationale;
            rationale.classList.add('show');
        }

        function cancelSelection() {
            const questionData = getCurrentQuestionData();
            
            if (isMultipleResponseQuestion()) {
                selectedOptions = [];
                isSubmitted = false;
                
                const options = document.querySelectorAll('.option');
                options.forEach(option => {
                    option.classList.remove('selected', 'correct', 'incorrect');
                });
                
                if (answers[currentSection][currentQuestion]) {
                    answers[currentSection][currentQuestion] = {selected: [], submitted: false};
                }
                
                document.getElementById('nextBtn').disabled = true;
                document.getElementById('submitBtn').disabled = true;
                document.getElementById('feedback').style.display = 'none';
                document.getElementById('rationale').classList.remove('show');
                document.getElementById('cancelBtn').classList.remove('show');
            } else {
                answers[currentSection][currentQuestion] = null;
                selectedOption = null;
                
                const options = document.querySelectorAll('.option');
                options.forEach(option => {
                    option.classList.remove('selected', 'correct', 'incorrect');
                });
                
                document.getElementById('feedback').style.display = 'none';
                document.getElementById('rationale').classList.remove('show');
                document.getElementById('nextBtn').disabled = true;
                document.getElementById('cancelBtn').classList.remove('show');
            }
        }

        function nextCard() {
            const totalQuestions = getTotalQuestions();
            
            if (currentQuestion < totalQuestions - 1) {
                currentQuestion++;
                selectedOption = null;
                selectedOptions = [];
                isSubmitted = false;
                loadQuestion();
            } else {
                let correctCount = 0;
                let totalAnswered = 0;
                
                Object.keys(answers).forEach(section => {
                    answers[section].forEach((answer, index) => {
                        if (answer !== null && answer !== undefined) {
                            totalAnswered++;
                            const questionData = getQuestionData(section, index);
                            
                            if (Array.isArray(questionData?.correct)) {
                                if (answer.submitted && Array.isArray(answer.selected)) {
                                    const allCorrect = questionData.correct.every(c => answer.selected.includes(c));
                                    const noIncorrect = answer.selected.every(s => questionData.correct.includes(s));
                                    if (allCorrect && noIncorrect) correctCount++;
                                }
                            } else {
                                if (answer === questionData?.correct) correctCount++;
                            }
                        }
                    });
                });
                
                alert(`Quiz completed!\n\nAnswered: ${totalAnswered}\nCorrect: ${correctCount}\n\nClick OK to restart.`);
                
                currentSection = 'multiple-choice';
                currentQuestion = 0;
                selectedOption = null;
                selectedOptions = [];
                isSubmitted = false;
                answers = {
                    'multiple-choice': Array(sections['multiple-choice'].length).fill(null),
                    'multiple-response': Array(sections['multiple-response'].length).fill({selected: [], submitted: false}),
                    'all': Array(sections['all'].length).fill(null)
                };
                
                setSection('multiple-choice');
            }
        }

        function previousCard() {
            if (currentQuestion > 0) {
                currentQuestion--;
                const storedAnswer = answers[currentSection][currentQuestion];
                
                if (isMultipleResponseQuestion()) {
                    selectedOptions = storedAnswer?.selected || [];
                    isSubmitted = storedAnswer?.submitted || false;
                } else {
                    selectedOption = storedAnswer;
                }
                
                loadQuestion();
            }
        }

        function getTotalQuestions() {
            if (currentSection === 'all') {
                return sections['all'].length;
            } else {
                return sections[currentSection].length;
            }
        }

        function getQuestionData(section, index) {
            if (section === 'all') {
                return sections['all'][index];
            } else {
                return sections[section][index];
            }
        }

        // Initialize
        setSection('multiple-choice');
        
        // Keyboard shortcuts
        document.addEventListener('keydown', function(event) {
            if (event.key >= '1' && event.key <= '5') {
                const index = parseInt(event.key) - 1;
                const questionData = getCurrentQuestionData();
                selectOption(index, questionData);
            } else if (event.key >= 'a' && event.key <= 'e') {
                const index = event.key.charCodeAt(0) - 97;
                const questionData = getCurrentQuestionData();
                selectOption(index, questionData);
            } else if (event.key === 'Enter' && isMultipleResponseQuestion()) {
                if (selectedOptions.length > 0 && !isSubmitted) {
                    submitAnswer();
                }
            } else if (event.key === 'ArrowLeft') {
                if (!document.getElementById('prevBtn').disabled) {
                    previousCard();
                }
            } else if (event.key === 'ArrowRight') {
                if (!document.getElementById('nextBtn').disabled) {
                    nextCard();
                }
            } else if (event.key === ' ' || event.key === 'Spacebar') {
                if (!document.getElementById('nextBtn').disabled && !isMultipleResponseQuestion()) {
                    nextCard();
                }
            } else if (event.key === 'Escape') {
                cancelSelection();
            }
        });
    </script>
</body>
</html>